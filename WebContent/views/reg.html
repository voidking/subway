<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../public/lib/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../public/lib/bootstrap/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="../public/css/reg.css">
    <title>用户注册</title>
</head>
<body>
    <div class="container">
        <form class="form-reg">
            <h2 class="form-signin-heading">用户注册</h2>
            <input id="username" type="text" class="form-control" placeholder="请输入用户名" required="" autofocus="">
            <input id="password" type="password" class="form-control" placeholder="请输入密码" required="">
            <input id="password2" type="password" class="form-control" placeholder="请重复密码" required="">
            <button id="confirm" class="btn btn-lg btn-primary btn-block" type="button">确认注册</button>
        </form>
    </div>
<script src="../public/lib/jquery/jquery.min.js"></script>
<script src="../public/lib/layer/src/layer.js"></script>
<script>
$(function(){
    $('#confirm').on('click',function(){
        var username = $('#username').val();
        var password = $('#password').val();
        var password2 = $('#password2').val();
        var data = {
            username: username,
            password: password,
            password2: password2
        };
        $.ajax({
            url: '/subway/Reg',
            type: 'POST',
            dataType: 'json',
            data: data,
            success: function(data){
                console.log(data);
                if(data.code == 0){
                    layer.msg('注册成功，正在转向登录页面');
                    setTimeout(function(){
                        window.location.href = './login.html';
                    },2000);
                }else{
                    layer.msg(data.ext);
                }
            },
            error: function(xhr){
                console.log(data);
            }
        });
    });
});
</script>
</body>
</html>